<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Optimality in Stopping · Stopping.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Stopping.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../idcard/">Stopping&#39;s ID</a></li><li><a class="tocitem" href="../idcard-state/">State&#39;s ID</a></li><li><a class="tocitem" href="../idcard-stoppingmeta/">Meta&#39;s ID</a></li><li class="is-active"><a class="tocitem" href>Optimality in Stopping</a><ul class="internal"><li><a class="tocitem" href="#How-Stopping-checks-for-optimality"><span>How Stopping checks for optimality</span></a></li></ul></li><li><a class="tocitem" href="../example-basic-Newton/">Stopping in action</a></li><li><a class="tocitem" href="../idcard-stopremote/">Stop remote control</a></li><li><a class="tocitem" href="../stop-workflow/">Stopping workflow</a></li><li><a class="tocitem" href="../nlpstopping/">NLPStopping</a></li><li><a class="tocitem" href="../lastopping/">LAStopping</a></li><li><a class="tocitem" href="../index_tuto/">Readme</a></li><li><a class="tocitem" href="../tutorial/">Examples and tutorials</a></li><li><a class="tocitem" href="../howtostate/">How to State</a></li><li><a class="tocitem" href="../howtostate-nlp/">How to State for NLPs</a></li><li><a class="tocitem" href="../howtostop/">How to Stop</a></li><li><a class="tocitem" href="../howtostop-2/">How to Stop 2</a></li><li><a class="tocitem" href="../howtostop-nlp/">How to Stop for NLPs</a></li><li><a class="tocitem" href="../linear-algebra/">Solve linear algebra</a></li><li><a class="tocitem" href="../buffer/">Use a buffer function</a></li><li><a class="tocitem" href="../fixed-point/">A fixed point algorithm</a></li><li><a class="tocitem" href="../backls/">Backtracking linesearch algorithm</a></li><li><a class="tocitem" href="../uncons/">Unconstrained optimization algorithm</a></li><li><a class="tocitem" href="../active-set/">Active set algorithm</a></li><li><a class="tocitem" href="../penalty/">Quadratic penalty algorithm</a></li><li><a class="tocitem" href="../run-optimsolver/">Run optimization algorithms</a></li><li><a class="tocitem" href="../benchmark/">Benchmark optimization algorithms</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Optimality in Stopping</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Optimality in Stopping</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/vepiteski/Stopping.jl/blob/master/docs/src/howstopcheckoptimality.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="How-Stopping-checks-for-optimality"><a class="docs-heading-anchor" href="#How-Stopping-checks-for-optimality">How Stopping checks for optimality</a><a id="How-Stopping-checks-for-optimality-1"></a><a class="docs-heading-anchor-permalink" href="#How-Stopping-checks-for-optimality" title="Permalink"></a></h2><p>The solver can let Stopping handles the optimality checks. We see here how it works and how to tune it in.</p><p>First, the function <code>stop!</code> computes a <strong>score</strong> using <code>optimality_check</code> function given in the <code>meta</code>. The keywords argument given in <code>stop!</code> are passed to this function.</p><pre><code class="language-julia">#Compute the score if !src.optimality_check
score = stp.meta.optimality_check(stp.pb, stp.current_state; kwargs...))</code></pre><p>The <strong>score</strong> is then stored in <code>stp.current_state.current_score</code>. If the <strong>score</strong> doesn&#39;t contain any NaN, Stopping proceeds and test whether it is within tolerances given as functions in <code>meta.tol_check</code> and <code>meta.tol_check_neg</code>.</p><pre><code class="language-julia">#Compute the tolerances
check_pos, check_neg = tol_check(stp.meta)
#Test the score vs the tolerances
optimal = _inequality_check(optimality, check_pos, check_neg)</code></pre><p>So, overall Stopping does:</p><pre><code class="language-julia">check_pos = stp.meta.tol_check(stp.meta.atol, stp.meta.rtol, stp.meta.optimality0)
check_neg = stp.meta.tol_check_neg(stp.meta.atol, stp.meta.rtol, stp.meta.optimality0)
score     = stp.meta.optimality_check(stp.pb, stp.current_state)
check_pos ≤ score ≤ check_neg</code></pre><h3 id="FAQ:-Does-it-work-for-vector-scores-as-well?"><a class="docs-heading-anchor" href="#FAQ:-Does-it-work-for-vector-scores-as-well?">FAQ: Does it work for vector scores as well?</a><a id="FAQ:-Does-it-work-for-vector-scores-as-well?-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ:-Does-it-work-for-vector-scores-as-well?" title="Permalink"></a></h3><p>The type of the score and tolerances are respectively initialized in the State and the Meta at the initialization of the Stopping. Hence one can use vectorized scores as long as they can be compared with the tolerances. For instance:</p><ul><li>The score is a vector and tolerances are vectors of the same length or numbers.</li><li>The score is a tuple and tolerances are tuple or a number.</li></ul><h3 id="FAQ:-How-do-I-implement-AND-and-OR-conditions?"><a class="docs-heading-anchor" href="#FAQ:-How-do-I-implement-AND-and-OR-conditions?">FAQ: How do I implement AND and OR conditions?</a><a id="FAQ:-How-do-I-implement-AND-and-OR-conditions?-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ:-How-do-I-implement-AND-and-OR-conditions?" title="Permalink"></a></h3><p>The concatenation of two scores (AND condition) that need to be tested to zero can be represented as a vector. The disjunction of two score (OR condition) are represented as tuple.</p><h3 id="FAQ:-Do-Stopping-really-computes-the-tolerances-each-time?"><a class="docs-heading-anchor" href="#FAQ:-Do-Stopping-really-computes-the-tolerances-each-time?">FAQ: Do Stopping really computes the tolerances each time?</a><a id="FAQ:-Do-Stopping-really-computes-the-tolerances-each-time?-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ:-Do-Stopping-really-computes-the-tolerances-each-time?" title="Permalink"></a></h3><p>It does unless <code>meta.retol</code> is set as <code>true</code>. This entry can be set as true from the beginning as the <code>tol_check</code> functions are evaluated once at the initialization of the <code>meta</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../idcard-stoppingmeta/">« Meta&#39;s ID</a><a class="docs-footer-nextpage" href="../example-basic-Newton/">Stopping in action »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 24 February 2021 22:50">Wednesday 24 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
